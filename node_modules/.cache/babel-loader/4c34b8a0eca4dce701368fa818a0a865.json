{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ali-v\\\\OneDrive\\\\Desktop\\\\Web Dev Shit\\\\CyberOps\\\\CyberOps_Website\\\\src\\\\pages\\\\LoginPage.js\";\nimport React, { useContext, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { UserContext } from \"../context/UserContext\";\nexport default function LoginPage() {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [redirect, setRedirect] = useState(false);\n  const {\n    setUserInfo\n  } = useContext(UserContext);\n\n  async function login(ev) {\n    ev.preventDefault();\n    const response = await fetch('http://localhost:4000/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include'\n    });\n\n    if (response.ok) {\n      response.json().then(userInfo => {\n        setUserInfo(userInfo);\n        setRedirect(true);\n      });\n    } else {\n      alert('wrong credentials');\n    }\n  }\n\n  if (redirect) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: '/',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    className: \"login\",\n    onSubmit: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"username\",\n    value: username,\n    onChange: ev => setUsername(ev.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"password\",\n    value: password,\n    onChange: ev => setPassword(ev.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, \"Login\"));\n}","map":{"version":3,"sources":["C:/Users/ali-v/OneDrive/Desktop/Web Dev Shit/CyberOps/CyberOps_Website/src/pages/LoginPage.js"],"names":["React","useContext","useState","Navigate","UserContext","LoginPage","username","setUsername","password","setPassword","redirect","setRedirect","setUserInfo","login","ev","preventDefault","response","fetch","method","body","JSON","stringify","headers","credentials","ok","json","then","userInfo","alert","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,SAAQC,WAAR,QAA0B,wBAA1B;AAEA,eAAe,SAASC,SAAT,GAAqB;AAClC,QAAM,CAACC,QAAD,EAAUC,WAAV,IAAyBL,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACM,QAAD,EAAUC,WAAV,IAAyBP,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACQ,QAAD,EAAUC,WAAV,IAAyBT,QAAQ,CAAC,KAAD,CAAvC;AACA,QAAM;AAACU,IAAAA;AAAD,MAAgBX,UAAU,CAACG,WAAD,CAAhC;;AACA,iBAAeS,KAAf,CAAqBC,EAArB,EAAyB;AACvBA,IAAAA,EAAE,CAACC,cAAH;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAAgC;AAC1DC,MAAAA,MAAM,EAAE,MADkD;AAE1DC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACf,QAAAA,QAAD;AAAWE,QAAAA;AAAX,OAAf,CAFoD;AAG1Dc,MAAAA,OAAO,EAAE;AAAC,wBAAe;AAAhB,OAHiD;AAI1DC,MAAAA,WAAW,EAAE;AAJ6C,KAAhC,CAA5B;;AAMA,QAAIP,QAAQ,CAACQ,EAAb,EAAiB;AACfR,MAAAA,QAAQ,CAACS,IAAT,GAAgBC,IAAhB,CAAqBC,QAAQ,IAAI;AAC/Bf,QAAAA,WAAW,CAACe,QAAD,CAAX;AACAhB,QAAAA,WAAW,CAAC,IAAD,CAAX;AACD,OAHD;AAID,KALD,MAKO;AACLiB,MAAAA,KAAK,CAAC,mBAAD,CAAL;AACD;AACF;;AAED,MAAIlB,QAAJ,EAAc;AACZ,wBAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAE,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AACD,sBACE;AAAM,IAAA,SAAS,EAAC,OAAhB;AAAwB,IAAA,QAAQ,EAAEG,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AACO,IAAA,WAAW,EAAC,UADnB;AAEO,IAAA,KAAK,EAAEP,QAFd;AAGO,IAAA,QAAQ,EAAEQ,EAAE,IAAIP,WAAW,CAACO,EAAE,CAACe,MAAH,CAAUC,KAAX,CAHlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAME;AAAO,IAAA,IAAI,EAAC,UAAZ;AACO,IAAA,WAAW,EAAC,UADnB;AAEO,IAAA,KAAK,EAAEtB,QAFd;AAGO,IAAA,QAAQ,EAAEM,EAAE,IAAIL,WAAW,CAACK,EAAE,CAACe,MAAH,CAAUC,KAAX,CAHlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAVF,CADF;AAcD","sourcesContent":["import React, {useContext, useState} from \"react\";\nimport {Navigate} from \"react-router-dom\";\nimport {UserContext} from \"../context/UserContext\";\n\nexport default function LoginPage() {\n  const [username,setUsername] = useState('');\n  const [password,setPassword] = useState('');\n  const [redirect,setRedirect] = useState(false);\n  const {setUserInfo} = useContext(UserContext);\n  async function login(ev) {\n    ev.preventDefault();\n    const response = await fetch('http://localhost:4000/login', {\n      method: 'POST',\n      body: JSON.stringify({username, password}),\n      headers: {'Content-Type':'application/json'},\n      credentials: 'include',\n    });\n    if (response.ok) {\n      response.json().then(userInfo => {\n        setUserInfo(userInfo);\n        setRedirect(true);\n      });\n    } else {\n      alert('wrong credentials');\n    }\n  }\n\n  if (redirect) {\n    return <Navigate to={'/'} />\n  }\n  return (\n    <form className=\"login\" onSubmit={login}>\n      <h1>Login</h1>\n      <input type=\"text\"\n             placeholder=\"username\"\n             value={username}\n             onChange={ev => setUsername(ev.target.value)}/>\n      <input type=\"password\"\n             placeholder=\"password\"\n             value={password}\n             onChange={ev => setPassword(ev.target.value)}/>\n      <button>Login</button>\n    </form>\n  );\n}"]},"metadata":{},"sourceType":"module"}