{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ali-v\\\\OneDrive\\\\Desktop\\\\Web Dev Shit\\\\CyberOps\\\\CyberOps_Website\\\\src\\\\pages\\\\EditPost.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Navigate, useParams } from \"react-router-dom\";\nimport Editor from \"../Editor\";\nexport default function EditPost() {\n  const {\n    id\n  } = useParams();\n  const [title, setTitle] = useState('');\n  const [summary, setSummary] = useState('');\n  const [content, setContent] = useState('');\n  const [files, setFiles] = useState('');\n  const [redirect, setRedirect] = useState(false);\n  useEffect(() => {\n    fetch('http://localhost:3500/post/' + id).then(response => {\n      response.json().then(postInfo => {\n        setTitle(postInfo.title);\n        setContent(postInfo.content);\n        setSummary(postInfo.summary);\n      });\n    });\n  }, []);\n\n  async function updatePost(ev) {\n    ev.preventDefault();\n    const data = new FormData();\n    data.set('title', title);\n    data.set('summary', summary);\n    data.set('content', content);\n    data.set('id', id);\n\n    if (files === null || files === void 0 ? void 0 : files[0]) {\n      data.set('file', files === null || files === void 0 ? void 0 : files[0]);\n    }\n\n    const response = await fetch('http://localhost:4000/post', {\n      method: 'PUT',\n      body: data,\n      credentials: 'include'\n    });\n\n    if (response.ok) {\n      setRedirect(true);\n    }\n  }\n\n  if (redirect) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: '/post/' + id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: updatePost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"title\",\n    placeholder: 'Title',\n    value: title,\n    onChange: ev => setTitle(ev.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"summary\",\n    placeholder: 'Summary',\n    value: summary,\n    onChange: ev => setSummary(ev.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: ev => setFiles(ev.target.files),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Editor, {\n    onChange: setContent,\n    value: content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      marginTop: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, \"Update post\"));\n}","map":{"version":3,"sources":["C:/Users/ali-v/OneDrive/Desktop/Web Dev Shit/CyberOps/CyberOps_Website/src/pages/EditPost.js"],"names":["React","useEffect","useState","Navigate","useParams","Editor","EditPost","id","title","setTitle","summary","setSummary","content","setContent","files","setFiles","redirect","setRedirect","fetch","then","response","json","postInfo","updatePost","ev","preventDefault","data","FormData","set","method","body","credentials","ok","target","value","marginTop"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Navigate, useParams} from \"react-router-dom\";\nimport Editor from \"../Editor\";\n\nexport default function EditPost() {\n  const {id} = useParams();\n  const [title,setTitle] = useState('');\n  const [summary,setSummary] = useState('');\n  const [content,setContent] = useState('');\n  const [files, setFiles] = useState('');\n  const [redirect,setRedirect] = useState(false);\n\n  useEffect(() => {\n    fetch('http://localhost:3500/post/'+id)\n      .then(response => {\n        response.json().then(postInfo => {\n          setTitle(postInfo.title);\n          setContent(postInfo.content);\n          setSummary(postInfo.summary);\n        });\n      });\n  }, []);\n\n  async function updatePost(ev) {\n    ev.preventDefault();\n    const data = new FormData();\n    data.set('title', title);\n    data.set('summary', summary);\n    data.set('content', content);\n    data.set('id', id);\n    if (files?.[0]) {\n      data.set('file', files?.[0]);\n    }\n    const response = await fetch('http://localhost:4000/post', {\n      method: 'PUT',\n      body: data,\n      credentials: 'include',\n    });\n    if (response.ok) {\n      setRedirect(true);\n    }\n  }\n\n  if (redirect) {\n    return <Navigate to={'/post/'+id} />\n  }\n\n  return (\n    <form onSubmit={updatePost}>\n      <input type=\"title\"\n             placeholder={'Title'}\n             value={title}\n             onChange={ev => setTitle(ev.target.value)} />\n      <input type=\"summary\"\n             placeholder={'Summary'}\n             value={summary}\n             onChange={ev => setSummary(ev.target.value)} />\n      <input type=\"file\"\n             onChange={ev => setFiles(ev.target.files)} />\n      <Editor onChange={setContent} value={content} />\n      <button style={{marginTop:'5px'}}>Update post</button>\n    </form>\n  );\n}"]},"metadata":{},"sourceType":"module"}